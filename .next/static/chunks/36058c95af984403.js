(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,s,t)=>{s.exports=e.r(76562)},31713,e=>{"use strict";var s=e.i(43476),t=e.i(71645),r=e.i(18566);let l=(...e)=>e.filter((e,s,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===s).join(" ").trim();var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,t.forwardRef)(({color:e="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:c,iconNode:o,...d},m)=>(0,t.createElement)("svg",{ref:m,...a,width:s,height:s,stroke:e,strokeWidth:n?24*Number(r)/Number(s):r,className:l("lucide",i),...d},[...o.map(([e,s])=>(0,t.createElement)(e,s)),...Array.isArray(c)?c:[c]])),i=(e,s)=>{let r=(0,t.forwardRef)(({className:r,...a},i)=>(0,t.createElement)(n,{ref:i,iconNode:s,className:l(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,r),...a}));return r.displayName=`${e}`,r},c=i("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),o=i("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var d=e.i(46159),m=e.i(47163);function u({engines:e,selectedEngine:l,onEngineChange:a,placeholder:n="æœç´¢æˆ–è¾“å…¥ç½‘å€..."}){let[i,u]=(0,t.useState)(""),[x,h]=(0,t.useState)(!1);(0,r.useRouter)();let p=(0,t.useRef)(null),g=(0,m.useMounted)(),f=[...d.DEFAULT_SEARCH_ENGINES,...e.filter(e=>e.isCustom)],j=f.find(e=>e.id===l)||d.DEFAULT_SEARCH_ENGINES[0];return(0,s.jsx)("form",{onSubmit:e=>{if(e.preventDefault(),!i.trim())return;let s=i.trim();if((e=>{if(e.startsWith("http://")||e.startsWith("https://"))try{return new URL(e),!0}catch{return!1}if(/^(?!.*\s)([a-zA-Z0-9]([a-zA-Z0-9\-]*[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}(:[0-9]+)?(\/.*)?$/.test(e))try{return new URL(`https://${e}`),!0}catch{return!1}if(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})(:[0-9]+)?(\/.*)?$/.test(e)){let s=e.split(".");if(s.length>=4&&s.slice(0,4).every(e=>{let s=parseInt(e,10);return s>=0&&s<=255}))return!0}return!!(e.startsWith("localhost")||e.startsWith("127.0.0.1"))})(s)){let e=s.startsWith("http")?s:`https://${s}`;window.open(e,"_blank")}else{let e=(0,d.getSearchUrl)(j,s);window.open(e,"_blank")}u("")},className:"w-full max-w-2xl mx-auto",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,s.jsx)("input",{ref:p,type:"text",value:i,onChange:e=>u(e.target.value),placeholder:n,className:"glass-input w-full pl-12 pr-40 py-4 text-lg rounded-full"}),(0,s.jsx)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:(0,s.jsxs)("button",{type:"button",onClick:()=>h(!x),className:"glass-button px-3 py-2 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg",suppressHydrationWarning:!0,children:g?j.icon:d.DEFAULT_SEARCH_ENGINES[0].icon}),(0,s.jsx)("span",{className:"hidden sm:inline",children:j.name}),(0,s.jsx)(o,{className:`h-4 w-4 transition-transform ${x?"rotate-180":""}`})]})})]}),x&&(0,s.jsx)("div",{className:"absolute right-0 top-full mt-2 glass-card max-h-60 overflow-y-auto z-10",children:(0,s.jsx)("div",{className:"py-2",children:f.map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>{a(e.id),h(!1),p.current?.focus()},className:`w-full text-left context-menu-item flex items-center gap-3 ${e.id===l?"bg-accent text-accent-foreground":""}`,children:[(0,s.jsx)("span",{className:"text-lg w-6",children:e.icon}),(0,s.jsx)("span",{className:"flex-1",children:e.name})]},e.id))})})]})})}var x=e.i(74080);let h=i("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),p=i("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),g=i("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),f=i("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),j=i("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);function v({bookmark:e,onEdit:r,onDelete:l,onOpen:a,searchQuery:n,onDragStart:i,onDragEnd:c}){let[o,d]=(0,t.useState)(!1),u=(0,t.useRef)(null),v=(0,t.useRef)(null),N=(0,t.useRef)(!1);(0,t.useEffect)(()=>{function e(e){u.current&&!u.current.contains(e.target)&&d(!1)}function s(){d(!1)}return document.addEventListener("mousedown",e),window.addEventListener("resize",s),()=>{document.removeEventListener("mousedown",e),window.removeEventListener("resize",s)}},[]);let y=()=>{a&&a(),window.open(e.url,"_blank")},b=(e,t)=>{if(!t.trim())return e;let r=RegExp(`(${k(t)})`,"gi");return e.split(r).map((e,t)=>r.test(e)?(0,s.jsx)("span",{className:"search-highlight",children:e},t):e)},k=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),w=e.icon||(0,m.getFaviconUrl)(e.url);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{ref:u,className:"relative group cursor-pointer",onContextMenu:s=>{s.preventDefault(),d(!0);let t=document.getElementById(`menu-${e.id}`);t&&u.current&&(t.style.left=`${s.clientX}px`,t.style.top=`${s.clientY}px`)},onClick:()=>{N.current||o||y()},onTouchStart:()=>{N.current=!1,d(!1),v.current=setTimeout(()=>{if(N.current=!0,d(!0),u.current){let s=u.current.getBoundingClientRect(),t=document.getElementById(`menu-${e.id}`);t&&(t.style.left=`${s.left+s.width/2}px`,t.style.top=`${s.bottom}px`)}},500)},onTouchEnd:e=>{v.current&&clearTimeout(v.current),N.current||y()},draggable:!0,onDragStart:s=>i?.(s,e),onDragEnd:c,children:(0,s.jsx)("div",{className:"glass-card p-4 hover:shadow-xl hover:-translate-y-0.5 transition-all",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[w?(0,s.jsx)("img",{src:w,alt:"",className:"w-6 h-6 rounded",onError:e=>{e.target.style.display="none"}}):(0,s.jsx)(j,{className:"w-6 h-6 text-muted-foreground"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"text-base font-medium text-foreground truncate",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:b(e.url,n||"")}),e.notes&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:b(e.notes,n||"")}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mt-3",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(p,{className:"h-3 w-3"}),"è®¿é—®"]}),(0,s.jsx)("span",{children:(0,m.formatDate)(e.createdAt)})]})]}),(0,s.jsx)("button",{className:"glass-button p-2 opacity-0 group-hover:opacity-100 transition-opacity",onClick:e=>{e.stopPropagation(),d(!o)},children:(0,s.jsx)(h,{className:"h-4 w-4"})})]})})}),o&&(0,x.createPortal)((0,s.jsx)("div",{id:`menu-${e.id}`,className:"fixed z-50 glass-card shadow-2xl w-48",children:(0,s.jsxs)("div",{className:"py-2",children:[(0,s.jsxs)("button",{className:"context-menu-item flex items-center gap-3",onClick:()=>{r(),d(!1)},children:[(0,s.jsx)(g,{className:"h-4 w-4"}),"ç¼–è¾‘"]}),(0,s.jsxs)("button",{className:"context-menu-item flex items-center gap-3 text-destructive",onClick:()=>{l(),d(!1)},children:[(0,s.jsx)(f,{className:"h-4 w-4"}),"åˆ é™¤"]})]})}),document.body)]})}function N({className:e,hover:t=!0,children:r,...l}){return(0,s.jsx)("div",{className:(0,m.cn)("glass-card",t&&"hover:-translate-y-1 transition-transform",e),...l,children:r})}function y({className:e,children:t,...r}){return(0,s.jsx)("div",{className:(0,m.cn)("px-6 py-4 border-b",e),...r,children:t})}function b({className:e,children:t,...r}){return(0,s.jsx)("div",{className:(0,m.cn)("p-6",e),...r,children:t})}function k({className:e,children:t,...r}){return(0,s.jsx)("h3",{className:(0,m.cn)("text-lg font-semibold leading-none tracking-tight",e),...r,children:t})}function w({className:e,children:t,...r}){return(0,s.jsx)("p",{className:(0,m.cn)("text-sm text-muted-foreground mt-1",e),...r,children:t})}let C=i("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),S=i("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);function E({className:e,variant:t="primary",size:r="md",isLoading:l,disabled:a,children:n,...i}){return(0,s.jsxs)("button",{className:(0,m.cn)("glass-button inline-flex items-center justify-center gap-2",{"bg-primary text-primary-foreground hover:bg-primary/90":"primary"===t,"bg-secondary text-secondary-foreground hover:bg-secondary/80":"secondary"===t,"bg-transparent hover:bg-accent":"ghost"===t,"bg-destructive text-destructive-foreground hover:bg-destructive/90":"destructive"===t,"border border-input bg-transparent hover:bg-accent":"outline"===t,"text-sm":"sm"===r,"text-base":"md"===r,"text-lg":"lg"===r},(a||l)&&"opacity-50 cursor-not-allowed",e),disabled:a||l,...i,children:[l?(0,s.jsx)("div",{className:"h-4 w-4 rounded-full border-2 border-current border-t-transparent animate-spin"}):null,n]})}let D=(0,t.forwardRef)(({className:e,error:t,icon:r,...l},a)=>(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"relative",children:[r&&(0,s.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:r}),(0,s.jsx)("input",{ref:a,className:(0,m.cn)("glass-input w-full",r?"pl-10":"",t&&"border-destructive focus:ring-destructive",e),...l})]}),t?(0,s.jsx)("p",{className:"mt-1 text-sm text-destructive",children:t}):null]}));D.displayName="Input";var L=e.i(80348);function M({group:e,searchQuery:r,onEditBookmark:l,onDeleteBookmark:a,onEditGroup:n,onDeleteGroup:i,onAddBookmark:c,isDragging:o=!1}){let{moveBookmark:d}=(0,L.useAppContext)(),[m,u]=(0,t.useState)(!1),[h,p]=(0,t.useState)(!1),[j,y]=(0,t.useState)(e.name),[k,w]=(0,t.useState)(!1),[M,R]=(0,t.useState)(null),[T,z]=(0,t.useState)(null),A=(0,t.useRef)(null),I=(0,t.useRef)(null),F=(0,t.useRef)(null);(0,t.useEffect)(()=>{z(document.body)},[]),(0,t.useEffect)(()=>{function e(e){A.current&&I.current&&!A.current.contains(e.target)&&!I.current.contains(e.target)&&u(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let $=r?e.bookmarks.filter(e=>{let s=r.toLowerCase();return e.title.toLowerCase().includes(s)||e.url.toLowerCase().includes(s)||e.notes&&e.notes.toLowerCase().includes(s)}):e.bookmarks,U=()=>{j.trim()&&j!==e.name&&n(e.id,j.trim()),p(!1)},H=(s,t)=>{s.dataTransfer.effectAllowed="move",s.dataTransfer.setData("text/plain",JSON.stringify({bookmark:t,fromGroupId:e.id})),R(t)},B=e=>{R(null),w(!1)};return(0,s.jsxs)("div",{className:"mb-6 group",children:[(0,s.jsxs)(N,{className:"border border-border",children:[(0,s.jsxs)("div",{ref:I,className:"flex items-center justify-between p-4 border-b border-border",onContextMenu:e=>{e.preventDefault(),u(!0)},children:[h?(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,s.jsx)(D,{value:j,onChange:e=>y(e.target.value),onKeyDown:s=>{"Enter"===s.key?U():"Escape"===s.key&&(y(e.name),p(!1))},autoFocus:!0,className:"flex-1"}),(0,s.jsx)(E,{size:"sm",onClick:U,children:"ä¿å­˜"}),(0,s.jsx)(E,{size:"sm",variant:"ghost",onClick:()=>{y(e.name),p(!1)},children:"å–æ¶ˆ"})]}):(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:e.name}),(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:["(",$.length,")"]})]}),!h&&(0,s.jsxs)("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,s.jsx)(E,{size:"sm",variant:"ghost",onClick:()=>c(e.id),className:"p-2",children:(0,s.jsx)(C,{className:"h-4 w-4"})}),(0,s.jsx)(E,{size:"sm",variant:"ghost",onClick:()=>u(!m),className:"p-2",children:(0,s.jsx)(S,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)(b,{className:"p-0",children:[(0,s.jsx)("div",{ref:F,className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 p-4 transition-colors ${k?"bg-muted/50 ring-2 ring-ring":""}`,onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="move",w(!0)},onDragLeave:e=>{e.currentTarget===e.target&&w(!1)},onDrop:s=>{if(s.preventDefault(),w(!1),F.current)try{let t=s.dataTransfer.getData("text/plain"),{bookmark:r,fromGroupId:l}=JSON.parse(t),a=F.current,n=a.getBoundingClientRect(),i=s.clientX-n.left,c=s.clientY-n.top,o=getComputedStyle(a).gridTemplateColumns.split(" ").length,m=n.width/o,u=Math.floor(i/m),x=Math.floor(c/100),h=Math.max(0,Math.min(x*o+u,$.length));d(l||"",e.id,r.id,h)}catch(e){console.error("Failed to parse dragged bookmark data:",e)}},children:$.map(t=>(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(v,{bookmark:t,onEdit:()=>l(e.id,t),onDelete:()=>a(e.id,t.id),searchQuery:r,onDragStart:H,onDragEnd:B})},t.id))}),0===$.length&&(0,s.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,s.jsx)("div",{className:"mx-auto mb-4 w-12 h-12 rounded-full bg-muted flex items-center justify-center",children:(0,s.jsx)(C,{className:"h-6 w-6"})}),(0,s.jsx)("p",{children:r?"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„ä¹¦ç­¾":"æš‚æ— ä¹¦ç­¾"}),!r&&(0,s.jsx)(E,{variant:"ghost",size:"sm",onClick:()=>c(e.id),className:"mt-2",children:"æ·»åŠ ä¹¦ç­¾"})]})]})]}),m&&T&&(0,x.createPortal)((0,s.jsx)("div",{ref:A,className:"fixed z-50 glass-card shadow-2xl w-48",style:{left:I.current?.getBoundingClientRect().left,top:I.current?.getBoundingClientRect().bottom},children:(0,s.jsxs)("div",{className:"py-2",children:[(0,s.jsxs)("button",{className:"context-menu-item flex items-center gap-3",onClick:()=>{p(!0),u(!1)},children:[(0,s.jsx)(g,{className:"h-4 w-4"}),"é‡å‘½ååˆ†ç»„"]}),(0,s.jsxs)("button",{className:"context-menu-item flex items-center gap-3 text-destructive",onClick:()=>{confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªåˆ†ç»„å—ï¼Ÿåˆ†ç»„å†…çš„æ‰€æœ‰ä¹¦ç­¾ä¹Ÿå°†è¢«åˆ é™¤ã€‚")&&i(e.id),u(!1)},children:[(0,s.jsx)(f,{className:"h-4 w-4"}),"åˆ é™¤åˆ†ç»„"]})]})}),T)]})}e.i(47167);let R=i("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function T({open:e,onClose:r,title:l,children:a,footer:n,size:i="md",hideClose:c=!1}){let o=(0,t.useRef)(null);return((0,t.useEffect)(()=>{function s(s){"Escape"===s.key&&e&&r()}return e?(document.addEventListener("keydown",s),document.body.style.overflow="hidden"):document.body.style.overflow="auto",()=>{document.removeEventListener("keydown",s),document.body.style.overflow="auto"}},[e,r]),(0,t.useEffect)(()=>{function s(e){o.current&&e.target===o.current&&r()}return e&&document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[e,r]),e)?(0,x.createPortal)((0,s.jsx)("div",{ref:o,className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:(0,s.jsxs)("div",{className:(0,m.cn)("glass-card w-full max-h-[90vh] overflow-y-auto animate-slide-up",{"max-w-sm":"sm"===i,"max-w-md":"md"===i,"max-w-lg":"lg"===i,"max-w-xl":"xl"===i}),children:[(l||!c)&&(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[l?(0,s.jsx)("h2",{className:"text-xl font-semibold",children:l}):(0,s.jsx)("div",{}),!c&&(0,s.jsx)(E,{variant:"ghost",size:"sm",onClick:r,className:"p-2",children:(0,s.jsx)(R,{className:"h-4 w-4"})})]}),(0,s.jsx)("div",{className:"p-6",children:a}),n&&(0,s.jsx)("div",{className:"flex justify-end gap-3 p-6 border-t",children:n})]})}),document.body):null}let z=i("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),A=i("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),I=i("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),F=i("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);function $({config:e,onImport:r}){let[l,a]=(0,t.useState)(!1),[n,i]=(0,t.useState)(!1),[c,o]=(0,t.useState)(!1),[d,u]=(0,t.useState)(null),[x,h]=(0,t.useState)([]),[p,g]=(0,t.useState)(""),[f,j]=(0,t.useState)(""),v=(0,t.useRef)(null),N=(0,t.useRef)(null),y=async e=>{let s=e.target.files?.[0];if(s){try{let e=await s.text(),t=JSON.parse(e);C(t)?(u(t),a(!0),j("")):j("é…ç½®æ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®")}catch(e){j("æ— æ³•è§£æžé…ç½®æ–‡ä»¶")}v.current&&(v.current.value="")}},b=async e=>{console.log("ðŸ“‚ File input changed");let s=e.target.files?.[0];if(!s)return void console.log("âŒ No file selected");console.log("âœ… File selected:",s.name);try{let e=await s.text();console.log("ðŸ“„ File text loaded, length:",e.length);let t=k(e);if(console.log("ðŸ“ Parsed folders:",t.length),0===t.length){console.log("âš ï¸ No valid bookmark data found"),j("æœªæ‰¾åˆ°æœ‰æ•ˆçš„ä¹¦ç­¾æ•°æ®");return}h(t),g(s.name),o(!0),j(""),console.log("âœ… Modal should be shown")}catch(e){console.error("âŒ Error parsing file:",e),j("è§£æžä¹¦ç­¾æ–‡ä»¶å¤±è´¥ï¼š"+e.message)}N.current&&(N.current.value="")},k=e=>{let s;console.log("ðŸ”„ Starting HTML parsing, text length:",e.length);let t=[],r=/<DT>\s*<H3[^>]*>(.*?)<\/H3>[\s\S]*?<DL><p>([\s\S]*?)<\/DL>/g,l=/<DT>\s*<A[^>]*HREF="([^"]*)"[^>]*>(.*?)<\/A>/g,a=0;for(;null!==(s=r.exec(e));){let e;a++;let r=s[1].trim(),n=s[2];console.log(`ðŸ“‚ Found folder ${a}:`,r);let i=[],c=0;for(;null!==(e=l.exec(n));){c++;let s=e[1],t=e[2].trim();s&&t&&s.startsWith("http")?(i.push({title:w(t),url:s}),console.log(`  ðŸ”– Bookmark ${c}:`,t.substring(0,50))):console.log(`  âš ï¸ Skipping invalid bookmark ${c}:`,{url:s,title:t?.substring(0,30)})}i.length>0?(t.push({name:w(r),bookmarks:i}),console.log(`âœ… Added folder with ${i.length} bookmarks`)):console.log(`âš ï¸ Skipping empty folder:`,r),l.lastIndex=0}return console.log(`ðŸ Parsing complete. Found ${t.length} folders with bookmarks`),t},w=e=>{let s={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":" "};return e.replace(/&(?:amp|lt|gt|quot|#39|nbsp);/g,e=>s[e]||e)},C=e=>!!e&&"object"==typeof e&&"string"==typeof e.version&&"string"==typeof e.selectedSearchEngine&&!!Array.isArray(e.searchEngines)&&!!Array.isArray(e.groups)&&!!e.groups.every(e=>e.id&&e.name&&Array.isArray(e.bookmarks)&&e.bookmarks.every(e=>e.id&&e.title&&e.url))&&(!("pageTitle"in e)||"string"==typeof e.pageTitle)&&(!("pageDescription"in e)||"string"==typeof e.pageDescription)&&(!("heroTitle"in e)||"string"==typeof e.heroTitle)&&(!("heroDescription"in e)||"string"==typeof e.heroDescription)&&(!("backgroundImage"in e)||"string"==typeof e.backgroundImage)&&(!("themeColor"in e)||void 0===e.themeColor||null===e.themeColor||"object"==typeof e.themeColor&&"number"==typeof e.themeColor.r&&"number"==typeof e.themeColor.g&&"number"==typeof e.themeColor.b&&!(e.themeColor.r<0)&&!(e.themeColor.r>255)&&!(e.themeColor.g<0)&&!(e.themeColor.g>255)&&!(e.themeColor.b<0)&&!(e.themeColor.b>255))&&!0;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(E,{variant:"secondary",size:"sm",onClick:()=>{v.current?.click()},className:"flex items-center gap-2",children:[(0,s.jsx)(z,{className:"h-4 w-4"}),"å¯¼å…¥é…ç½®"]}),(0,s.jsxs)(E,{variant:"secondary",size:"sm",onClick:()=>{let s=JSON.stringify({...e,exportDate:new Date().toISOString(),appVersion:"1.0.0"},null,2);(0,m.downloadFile)(`my-nav-config-${Date.now()}.json`,s),i(!0)},className:"flex items-center gap-2",children:[(0,s.jsx)(A,{className:"h-4 w-4"}),"å¯¼å‡ºé…ç½®"]}),(0,s.jsxs)(E,{variant:"secondary",size:"sm",onClick:()=>{console.log("ðŸ–±ï¸ HTML Import button clicked"),console.log("ðŸ“ File input ref:",N.current),N.current?.click()},className:"flex items-center gap-2",children:[(0,s.jsx)(F,{className:"h-4 w-4"}),"å¯¼å…¥ HTML ä¹¦ç­¾"]}),(0,s.jsx)("input",{ref:v,type:"file",accept:".json",onChange:y,className:"hidden"}),(0,s.jsx)("input",{ref:N,type:"file",accept:".html",onChange:b,className:"hidden"})]}),(0,s.jsx)(T,{open:l,onClose:()=>{a(!1),u(null)},title:"å¯¼å…¥é…ç½®",children:(0,s.jsx)("div",{className:"space-y-4",children:f?(0,s.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-destructive/10 text-destructive",children:[(0,s.jsx)(I,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),(0,s.jsx)("p",{children:f})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{children:"ç¡®å®šè¦å¯¼å…¥è¿™ä¸ªé…ç½®æ–‡ä»¶å—ï¼Ÿ"}),d&&(0,s.jsxs)("div",{className:"glass-card p-4 space-y-2",children:[(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsx)("span",{className:"font-medium",children:"ç‰ˆæœ¬ï¼š"})," ",d.version]}),(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsx)("span",{className:"font-medium",children:"åˆ†ç»„æ•°é‡ï¼š"})," ",d.groups.length]}),(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsx)("span",{className:"font-medium",children:"ä¹¦ç­¾æ€»æ•°ï¼š"})," ",d.groups.reduce((e,s)=>e+s.bookmarks.length,0)]}),(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsx)("span",{className:"font-medium",children:"è‡ªå®šä¹‰æœç´¢å¼•æ“Žï¼š"})," ",d.searchEngines.filter(e=>e.isCustom).length]})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"å¯¼å…¥å°†è¦†ç›–å½“å‰æ‰€æœ‰é…ç½®ã€‚å»ºè®®å…ˆå¯¼å‡ºå¤‡ä»½ã€‚"})]})})}),(0,s.jsx)(T,{open:n,onClose:()=>i(!1),title:"é…ç½®å·²å¯¼å‡º",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{children:"é…ç½®æ–‡ä»¶å·²æˆåŠŸä¸‹è½½åˆ°æœ¬åœ°ã€‚"}),(0,s.jsxs)("div",{className:"glass-card p-4 space-y-2",children:[(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsx)("span",{className:"font-medium",children:"ç‰ˆæœ¬ï¼š"})," ",e.version]}),(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsx)("span",{className:"font-medium",children:"åˆ†ç»„æ•°é‡ï¼š"})," ",e.groups.length]}),(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsx)("span",{className:"font-medium",children:"ä¹¦ç­¾æ€»æ•°ï¼š"})," ",e.groups.reduce((e,s)=>e+s.bookmarks.length,0)]}),"MyNav - Personal Browser Navigation"!==e.pageTitle&&(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsx)("span",{className:"font-medium",children:"è‡ªå®šä¹‰æ ‡é¢˜ï¼š"})," âœ“"]}),e.themeColor&&(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsx)("span",{className:"font-medium",children:"è‡ªå®šä¹‰ä¸»é¢˜è‰²ï¼š"})," âœ“"]}),e.backgroundImage&&(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsx)("span",{className:"font-medium",children:"è‡ªå®šä¹‰èƒŒæ™¯å›¾ï¼š"})," âœ“"]})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"é…ç½®æ–‡ä»¶å·²ä¿å­˜åˆ°ä¸‹è½½æ–‡ä»¶å¤¹ã€‚"})]})}),(0,s.jsx)(T,{open:c,onClose:()=>{o(!1),h([]),g(""),N.current&&(N.current.value="")},title:"å¯¼å…¥ HTML ä¹¦ç­¾",footer:(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)(E,{variant:"ghost",size:"sm",onClick:()=>{o(!1),h([]),g(""),N.current&&(N.current.value="")},children:"å–æ¶ˆ"}),(0,s.jsx)(E,{size:"sm",onClick:()=>{if(!x||0===x.length)return;let s=x.map((s,t)=>{let r=s.bookmarks.map(e=>({id:(0,m.generateId)(),title:e.title,url:e.url,icon:e.icon||void 0,notes:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}));return{id:(0,m.generateId)(),name:s.name,bookmarks:r,order:e.groups.length+t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}});r({...e,groups:[...e.groups,...s]}),o(!1),h([]),N.current&&(N.current.value="")},disabled:!x||0===x.length,children:"ç¡®è®¤å¯¼å…¥"})]}),children:(0,s.jsx)("div",{className:"space-y-4",children:f?(0,s.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-destructive/10 text-destructive",children:[(0,s.jsx)(I,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),(0,s.jsx)("p",{children:f})]}):x&&x.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["æ–‡ä»¶ ",(0,s.jsx)("strong",{children:p})," åŒ…å«ï¼š"]}),(0,s.jsx)("div",{className:"glass-card p-4 space-y-3 max-h-64 overflow-y-auto",children:x.map((e,t)=>(0,s.jsx)("div",{className:"border-b border-border last:border-0 pb-3 last:pb-0",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("h4",{className:"font-medium",children:["ðŸ“ ",e.name]}),(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e.bookmarks?.length||0," ä¸ªä¹¦ç­¾"]})]})},t))}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"è¿™äº›ä¹¦ç­¾å°†è¢«æ·»åŠ åˆ°æ–°çš„åˆ†ç»„ä¸­ã€‚"})]}):null})})]})}var U=e.i(34080);function H({className:e,htmlFor:t,children:r,...l}){return(0,s.jsx)("label",{htmlFor:t,className:(0,m.cn)("block text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 mb-2",e),...l,children:r})}function B({open:e,onClose:t,onConfirm:r,title:l="ç¡®è®¤æ“ä½œ",message:a,confirmText:n="ç¡®è®¤",cancelText:i="å–æ¶ˆ",confirmVariant:c="destructive"}){return(0,s.jsx)(T,{open:e,onClose:t,title:l,size:"sm",footer:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(E,{variant:"outline",onClick:t,children:i}),(0,s.jsx)(E,{variant:c,onClick:()=>{r(),t()},children:n})]}),children:(0,s.jsx)("p",{className:"text-muted-foreground",children:a})})}let q=i("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),P=i("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),O=i("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),W=i("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);function G({onClose:e}){let{config:r,updateConfig:l,resetToDefault:a}=(0,L.useAppContext)(),n=(0,t.useRef)(null),[i,c]=(0,t.useState)(r.pageTitle),[o,d]=(0,t.useState)(r.pageDescription),[m,u]=(0,t.useState)(r.heroTitle),[x,h]=(0,t.useState)(r.heroDescription),[p,g]=(0,t.useState)(""),[f,j]=(0,t.useState)(!1),[v,C]=(0,t.useState)(r.themeColor?(0,U.rgbToHex)(r.themeColor):"#3b82f6"),S=(0,t.useCallback)(()=>{l({...r,pageTitle:i,pageDescription:o,heroTitle:m,heroDescription:x})},[r,i,o,m,x,l]),M=(0,t.useCallback)(e=>{C(e);let s=(0,U.hexToRgb)(e);s&&(0,U.validateRgbColor)(s)&&l({...r,themeColor:s})},[r,l]),R=(0,t.useCallback)(()=>{C("#3b82f6"),l({...r,themeColor:void 0})},[r,l]),T=(0,t.useCallback)(e=>{let s=e.target.files?.[0];if(s){if(s.size>5242880)return void alert("å›¾ç‰‡æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡5MB");if(!s.type.startsWith("image/"))return void alert("è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶");let e=new FileReader;e.onload=e=>{let s=e.target?.result;s&&l({...r,backgroundImage:s})},e.readAsDataURL(s)}},[r,l]),A=(0,t.useCallback)(()=>{p.trim()?p.startsWith("http://")||p.startsWith("https://")?l({...r,backgroundImage:p}):alert("è¯·è¾“å…¥æœ‰æ•ˆçš„http://æˆ–https://å¼€å¤´çš„URL"):alert("è¯·è¾“å…¥æœ‰æ•ˆçš„å›¾ç‰‡URL")},[r,p,l]),I=(0,t.useCallback)(()=>{l({...r,backgroundImage:void 0}),g("")},[r,l]),F=(0,t.useCallback)(()=>{j(!1),a()},[a]),$=(0,t.useCallback)(()=>{j(!0)},[]),G=(0,t.useCallback)(()=>{j(!1)},[]),_=({children:e})=>(0,s.jsx)("div",{className:"mb-8 last:mb-0",children:e});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(B,{open:f,onClose:G,onConfirm:F,title:"æ¢å¤é»˜è®¤è®¾ç½®",message:"æ­¤æ“ä½œå°†æ¸…é™¤æ‰€æœ‰é…ç½®å¹¶æ¢å¤åˆ°åˆå§‹çŠ¶æ€ï¼ŒåŒ…æ‹¬æ‰€æœ‰ä¹¦ç­¾ã€åˆ†ç»„å’Œè‡ªå®šä¹‰è®¾ç½®ã€‚æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼Œç¡®å®šè¦ç»§ç»­å—ï¼Ÿ",confirmText:"ç¡®è®¤æ¢å¤",cancelText:"å–æ¶ˆ"}),(0,s.jsxs)("div",{className:"space-y-6 max-w-2xl mx-auto",children:[(0,s.jsx)(_,{children:(0,s.jsxs)(N,{children:[(0,s.jsxs)(y,{children:[(0,s.jsxs)(k,{className:"flex items-center gap-2",children:[(0,s.jsx)(O,{className:"h-5 w-5"}),"åŸºç¡€è®¾ç½®"]}),(0,s.jsx)(w,{children:"è‡ªå®šä¹‰æµè§ˆå™¨æ ‡é¢˜å’Œæè¿°"})]}),(0,s.jsxs)(b,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(H,{htmlFor:"pageTitle",children:"æµè§ˆå™¨æ ‡é¢˜"}),(0,s.jsx)(D,{id:"pageTitle",value:i,onChange:e=>c(e.target.value),placeholder:"MyNav - Personal Browser Navigation"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"æ˜¾ç¤ºåœ¨æµè§ˆå™¨æ ‡ç­¾é¡µçš„æ ‡é¢˜"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(H,{htmlFor:"pageDescription",children:"æµè§ˆå™¨æè¿°"}),(0,s.jsx)(D,{id:"pageDescription",value:o,onChange:e=>d(e.target.value),placeholder:"A beautiful and lightweight personal browser navigation page"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"ç”¨äºŽæœç´¢å¼•æ“Žç»“æžœçš„æè¿°"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(H,{htmlFor:"heroTitle",children:"é¦–é¡µæ ‡é¢˜"}),(0,s.jsx)(D,{id:"heroTitle",value:m,onChange:e=>u(e.target.value),placeholder:"MyNav"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"æ˜¾ç¤ºåœ¨é¦–é¡µçš„ä¸»æ ‡é¢˜"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(H,{htmlFor:"heroDescription",children:"é¦–é¡µæè¿°"}),(0,s.jsx)(D,{id:"heroDescription",value:x,onChange:e=>h(e.target.value),placeholder:"æ‚¨çš„ä¸ªäººæµè§ˆå™¨å¯¼èˆªä¸­å¿ƒ"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"æ˜¾ç¤ºåœ¨é¦–é¡µçš„å‰¯æ ‡é¢˜"})]}),(0,s.jsx)("div",{className:"pt-4 flex justify-end",children:(0,s.jsx)(E,{onClick:S,children:"ä¿å­˜åŸºç¡€è®¾ç½®"})})]})]})}),(0,s.jsx)(_,{children:(0,s.jsxs)(N,{children:[(0,s.jsxs)(y,{children:[(0,s.jsxs)(k,{className:"flex items-center gap-2",children:[(0,s.jsx)(q,{className:"h-5 w-5"}),"ä¸»é¢˜é¢œè‰²"]}),(0,s.jsx)(w,{children:"è‡ªå®šä¹‰ä¸»é¢˜é¢œè‰²ï¼ˆå¯é€‰ï¼‰"})]}),(0,s.jsx)(b,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 sm:gap-6",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(H,{htmlFor:"themeColor",className:"block mb-2",children:"ä¸»é¢˜è‰²"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("input",{type:"color",id:"themeColor",value:v,onChange:e=>M(e.target.value),className:"h-12 w-20 border rounded-lg cursor-pointer shadow-sm hover:shadow-md transition-shadow"}),(0,s.jsx)(D,{type:"text",value:v,onChange:e=>M(e.target.value),placeholder:"#3b82f6",className:"w-32 font-mono"})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-3 leading-relaxed",children:"é€‰æ‹©ä¸»é¢˜é¢œè‰²ï¼Œå°†åº”ç”¨äºŽæ‰€æœ‰å¼ºè°ƒè‰²å’ŒUIç»„ä»¶"})]}),(0,s.jsxs)("div",{className:"flex-shrink-0",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2 sm:text-center",children:"é¢„è§ˆ"}),(0,s.jsx)("div",{className:"w-24 h-24 rounded-xl shadow-md border-2 border-border transition-all hover:shadow-lg hover:scale-105",style:{backgroundColor:v}})]})]}),(0,s.jsx)("div",{className:"pt-2 flex justify-end border-t border-border",children:(0,s.jsx)(E,{variant:"outline",onClick:R,children:"é‡ç½®ä¸ºé»˜è®¤"})})]})})]})}),(0,s.jsx)(_,{children:(0,s.jsxs)(N,{children:[(0,s.jsxs)(y,{children:[(0,s.jsxs)(k,{className:"flex items-center gap-2",children:[(0,s.jsx)(P,{className:"h-5 w-5"}),"èƒŒæ™¯å›¾ç‰‡"]}),(0,s.jsx)(w,{children:"è‡ªå®šä¹‰èƒŒæ™¯å›¾ç‰‡ï¼ˆå¯é€‰ï¼‰"})]}),(0,s.jsx)(b,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"pb-4 border-b border-border",children:[(0,s.jsx)(H,{className:"block mb-2 font-medium",children:"ä¸Šä¼ å›¾ç‰‡"}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[(0,s.jsxs)(E,{variant:"outline",onClick:()=>n.current?.click(),className:"flex items-center gap-2 w-full sm:w-auto justify-center",children:[(0,s.jsx)(z,{className:"h-4 w-4"}),"é€‰æ‹©å›¾ç‰‡"]}),(0,s.jsx)("input",{ref:n,type:"file",accept:"image/*",onChange:T,className:"hidden"}),(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"æ”¯æŒ JPGã€PNGã€GIFã€WebP æ ¼å¼ï¼Œæœ€å¤§ 5MB"})]})]}),(0,s.jsxs)("div",{className:"pb-4 border-b border-border",children:[(0,s.jsx)(H,{htmlFor:"backgroundImageUrl",className:"block mb-2 font-medium",children:"æˆ–è¾“å…¥å›¾ç‰‡URL"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(D,{id:"backgroundImageUrl",type:"url",value:p,onChange:e=>g(e.target.value),placeholder:"https://example.com/image.jpg",className:"flex-1"}),(0,s.jsx)(E,{onClick:A,className:"whitespace-nowrap",children:"åº”ç”¨"})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-2 leading-relaxed",children:"è¾“å…¥æœ‰æ•ˆçš„å›¾ç‰‡URLï¼ˆhttp:// æˆ– https://ï¼‰"})]}),r.backgroundImage&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(H,{className:"block mb-2 font-medium",children:"å½“å‰èƒŒæ™¯å›¾ç‰‡"}),r.backgroundImage.startsWith("data:")?(0,s.jsx)("div",{className:"p-3 bg-muted/50 rounded-lg border border-border",children:(0,s.jsxs)("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[(0,s.jsx)("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full"}),"å·²ä¸Šä¼ æœ¬åœ°å›¾ç‰‡"]})}):(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)("img",{src:r.backgroundImage,alt:"èƒŒæ™¯å›¾ç‰‡é¢„è§ˆ",className:"max-w-full h-56 object-cover rounded-lg border border-border shadow-sm transition-shadow hover:shadow-md"})})]}),(0,s.jsx)("div",{className:"pt-2 flex justify-end",children:(0,s.jsx)(E,{variant:"destructive",onClick:I,children:"ç§»é™¤èƒŒæ™¯å›¾ç‰‡"})})]})]})})]})}),(0,s.jsx)(_,{children:(0,s.jsxs)(N,{children:[(0,s.jsxs)(y,{children:[(0,s.jsxs)(k,{className:"flex items-center gap-2",children:[(0,s.jsx)(W,{className:"h-5 w-5"}),"é‡ç½®è®¾ç½®"]}),(0,s.jsx)(w,{children:"æ¢å¤æ‰€æœ‰è®¾ç½®åˆ°åˆå§‹çŠ¶æ€"})]}),(0,s.jsx)(b,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"æ­¤æ“ä½œå°†æ¸…é™¤æ‰€æœ‰é…ç½®ï¼ŒåŒ…æ‹¬ä¹¦ç­¾ã€åˆ†ç»„ã€è‡ªå®šä¹‰ä¸»é¢˜ã€èƒŒæ™¯å›¾ç‰‡ç­‰ï¼Œæ¢å¤åˆ°åˆå§‹çš„é»˜è®¤çŠ¶æ€ã€‚æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼Œè¯·è°¨æ…Žæ“ä½œã€‚"}),(0,s.jsx)("div",{className:"pt-2 flex justify-end",children:(0,s.jsxs)(E,{variant:"destructive",onClick:$,children:[(0,s.jsx)(W,{className:"h-4 w-4 mr-2"}),"æ¢å¤é»˜è®¤è®¾ç½®"]})})]})})]})})]})]})}function _({groupId:e,bookmark:r,onSave:l,onCancel:a}){let{config:n}=(0,L.useAppContext)(),[i,c]=(0,t.useState)({title:"",url:"",notes:""});(0,t.useEffect)(()=>{r&&c({title:r.title,url:r.url,icon:r.icon,notes:r.notes||""})},[r]);let[o,d]=(0,t.useState)({}),u=()=>{(()=>{let e={};if(i.title.trim()||(e.title="è¯·è¾“å…¥ä¹¦ç­¾åç§°"),i.url.trim())try{new URL(i.url)}catch{e.url="è¯·è¾“å…¥æœ‰æ•ˆçš„URL"}else e.url="è¯·è¾“å…¥URL";return d(e),0===Object.keys(e).length})()&&l({...i,icon:i.icon||(0,m.getFaviconUrl)(i.url)})},x=e=>{"Enter"===e.key&&e.ctrlKey&&u()};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-foreground",children:["åç§° ",(0,s.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,s.jsx)(D,{value:i.title,onChange:e=>c(s=>({...s,title:e.target.value})),onKeyDown:x,error:o.title,placeholder:"è¾“å…¥ä¹¦ç­¾åç§°",autoFocus:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-foreground",children:["URL ",(0,s.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,s.jsx)(D,{type:"url",value:i.url,onChange:e=>c(s=>({...s,url:e.target.value})),onBlur:()=>{if(i.url&&!i.title)try{let e=new URL(i.url);c(s=>({...s,title:e.hostname.replace("www.","")}))}catch{}},onKeyDown:x,error:o.url,placeholder:"https://example.com"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-foreground",children:"å¤‡æ³¨"}),(0,s.jsx)("textarea",{value:i.notes,onChange:e=>c(s=>({...s,notes:e.target.value})),onKeyDown:x,className:"glass-input w-full h-20 resize-none",placeholder:"æ·»åŠ å¤‡æ³¨ï¼ˆå¯é€‰ï¼‰"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,s.jsx)(E,{type:"button",variant:"ghost",size:"sm",onClick:a,children:"å–æ¶ˆ"}),(0,s.jsx)(E,{type:"button",size:"sm",onClick:u,children:r?"æ›´æ–°":"æ·»åŠ "})]})]})}function K({initialName:e="",onSave:r,onCancel:l,existingNames:a=[]}){let[n,i]=(0,t.useState)(e),[c,o]=(0,t.useState)("");(0,t.useEffect)(()=>{i(e)},[e]);let d=s=>{let t=s.trim();return t?t.length>50?"åç§°ä¸èƒ½è¶…è¿‡50ä¸ªå­—ç¬¦":a.includes(t)&&t!==e?"è¯¥åç§°å·²å­˜åœ¨":"":"è¯·è¾“å…¥åˆ†ç»„åç§°"},m=()=>{let e=d(n);e?o(e):r(n.trim())};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-foreground",children:["åˆ†ç»„åç§° ",(0,s.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,s.jsx)(D,{value:n,onChange:e=>{i(e.target.value),o(d(e.target.value))},onKeyDown:e=>{"Enter"===e.key?m():"Escape"===e.key&&l()},error:c,placeholder:"è¾“å…¥åˆ†ç»„åç§°",autoFocus:!0})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,s.jsx)(E,{type:"button",variant:"ghost",size:"sm",onClick:l,children:"å–æ¶ˆ"}),(0,s.jsx)(E,{type:"button",size:"sm",onClick:m,children:e?"æ›´æ–°":"åˆ›å»º"})]})]})}function V(){let{config:e,updateConfig:r,addBookmark:l,updateBookmark:a,deleteBookmark:n,addGroup:i,updateGroup:o,deleteGroup:d,importConfig:m}=(0,L.useAppContext)(),[x,h]=(0,t.useState)(""),[p,g]=(0,t.useState)(null),[f,j]=(0,t.useState)(null),[v,N]=(0,t.useState)(!1),[y,b]=(0,t.useState)(null),[k,w]=(0,t.useState)(!1),S=(0,t.useMemo)(()=>{let s=e.groups;if(p&&(s=s.filter(e=>e.id===p)),x.trim()){let e=x.toLowerCase();s=s.map(s=>({...s,bookmarks:s.bookmarks.filter(s=>s.title.toLowerCase().includes(e)||s.url.toLowerCase().includes(e)||s.notes&&s.notes.toLowerCase().includes(e))})).filter(e=>e.bookmarks.length>0)}return s},[e.groups,p,x]),R=e=>{j({groupId:e,bookmark:null})},z=(e,s)=>{j({groupId:e,bookmark:s})},A=()=>{b(null),N(!0)},I=e.groups.some(e=>e.bookmarks.length>0);return(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-screen-xl",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-2 bg-gradient-to-r from-primary to-blue-600 bg-clip-text text-transparent",children:e.heroTitle}),(0,s.jsx)("p",{className:"text-muted-foreground",children:e.heroDescription})]}),(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)(u,{engines:e.searchEngines,selectedEngine:e.selectedSearchEngine,onEngineChange:s=>r({...e,selectedSearchEngine:s})})}),(0,s.jsxs)("div",{className:"mb-6 flex gap-3",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(D,{icon:(0,s.jsx)(c,{className:"h-4 w-4 text-muted-foreground"}),value:x,onChange:e=>h(e.target.value),placeholder:"åœ¨ä¹¦ç­¾ä¸­æœç´¢ï¼ˆåç§°ã€URLã€å¤‡æ³¨ï¼‰"})}),(0,s.jsxs)(E,{onClick:A,variant:"secondary",children:[(0,s.jsx)(C,{className:"h-4 w-4"}),"æ·»åŠ åˆ†ç»„"]}),(0,s.jsx)(E,{onClick:()=>w(!0),variant:"ghost",children:"è®¾ç½®"})]}),e.groups.length>0&&(0,s.jsx)("div",{className:"mb-6 border-b border-border overflow-x-auto",children:(0,s.jsxs)("div",{className:"flex space-x-1 min-w-max pb-2",children:[(0,s.jsxs)("button",{onClick:()=>g(null),className:`px-4 py-2 text-sm font-medium rounded-t-lg transition-colors ${null===p?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted"}`,children:["å…¨éƒ¨ (",e.groups.reduce((e,s)=>e+s.bookmarks.length,0),")"]}),e.groups.map(e=>(0,s.jsxs)("button",{onClick:()=>g(e.id),className:`px-4 py-2 text-sm font-medium rounded-t-lg transition-colors whitespace-nowrap ${p===e.id?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted"}`,children:[e.name," (",e.bookmarks.length,")"]},e.id))]})}),I||x?(0,s.jsxs)("div",{className:"space-y-6",children:[S.map(e=>(0,s.jsx)(M,{group:e,searchQuery:x,onEditBookmark:z,onDeleteBookmark:n,onEditGroup:(e,s)=>o(e,s),onDeleteGroup:d,onAddBookmark:R},e.id)),0===S.length&&(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"mx-auto mb-4 w-20 h-20 rounded-full bg-muted flex items-center justify-center",children:(0,s.jsx)(c,{className:"h-8 w-8 text-muted-foreground"})}),(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„ä¹¦ç­¾"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"å°è¯•ä½¿ç”¨å…¶ä»–å…³é”®è¯æœç´¢"})]})]}):(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"mx-auto mb-6 w-24 h-24 rounded-full bg-gradient-to-br from-primary/20 to-blue-600/20 flex items-center justify-center",children:(0,s.jsx)(C,{className:"h-10 w-10 text-primary"})}),(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"å¼€å§‹ä½¿ç”¨ MyNav"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªä¹¦ç­¾åˆ†ç»„ï¼Œå¼€å§‹ç»„ç»‡æ‚¨çš„å¸¸ç”¨ç½‘ç«™"}),(0,s.jsxs)("div",{className:"space-x-3",children:[(0,s.jsxs)(E,{size:"lg",onClick:A,children:[(0,s.jsx)(C,{className:"h-5 w-5"}),"æ·»åŠ åˆ†ç»„"]}),(0,s.jsx)(E,{size:"lg",variant:"ghost",onClick:()=>w(!0),children:"å¯¼å…¥é…ç½®"})]})]}),(0,s.jsx)(T,{open:null!==f,onClose:()=>j(null),title:f?.bookmark?"ç¼–è¾‘ä¹¦ç­¾":"æ·»åŠ ä¹¦ç­¾",children:f&&(0,s.jsx)(_,{groupId:f.groupId,bookmark:f.bookmark||void 0,onSave:e=>{f&&(f.bookmark?a(f.groupId,f.bookmark.id,e):l(f.groupId,e),j(null))},onCancel:()=>j(null)})}),(0,s.jsx)(T,{open:v,onClose:()=>{N(!1),b(null)},title:y?"ç¼–è¾‘åˆ†ç»„":"æ·»åŠ åˆ†ç»„",children:(0,s.jsx)(K,{initialName:y&&e.groups.find(e=>e.id===y)?.name||"",existingNames:e.groups.map(e=>e.name),onSave:e=>{y?o(y,e):i(e),N(!1),b(null)},onCancel:()=>{N(!1),b(null)}})}),(0,s.jsx)(T,{open:k,onClose:()=>w(!1),title:"è®¾ç½®",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-3",children:"è‡ªå®šä¹‰è®¾ç½®"}),(0,s.jsx)(G,{onClose:()=>w(!1)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-3",children:"å¤‡ä»½ä¸Žæ¢å¤"}),(0,s.jsxs)("div",{className:"glass-card p-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium",children:"å¯¼å…¥/å¯¼å‡ºé…ç½®"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"å¤‡ä»½å½“å‰é…ç½®æˆ–æ¢å¤ä¹‹å‰çš„é…ç½®"})]})}),(0,s.jsx)($,{config:e,onImport:m})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-3",children:"å…³äºŽ"}),(0,s.jsx)("div",{className:"glass-card p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"font-medium",children:["MyNav v",e.version]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"ä¸€ä¸ªç®€æ´ä¼˜é›…çš„ä¸ªäººæµè§ˆå™¨å¯¼èˆªé¡µé¢"})]}),(0,s.jsxs)(E,{onClick:()=>window.open("https://github.com/yourusername/mynav","_blank"),children:[(0,s.jsx)("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),"GitHub"]})]})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-3",children:"ç»Ÿè®¡ä¿¡æ¯"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"glass-card p-3 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-primary",children:e.groups.length}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"åˆ†ç»„"})]}),(0,s.jsxs)("div",{className:"glass-card p-3 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-primary",children:e.groups.reduce((e,s)=>e+s.bookmarks.length,0)}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"ä¹¦ç­¾"})]})]})]})]})})]})}e.s(["default",()=>V],31713)}]);